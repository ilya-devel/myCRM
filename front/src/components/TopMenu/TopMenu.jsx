import LogInOut from "./LogInOut";
import UserMenu from "./UserMenu";
import './TopMenu.sass'
import { NavLink } from "react-router-dom";
import { useDispatch, useSelector } from "react-redux";
import { useEffect } from "react";
import { fetchAuth } from "../../store/authSlice";

export default function TopMenu() {
    const { userInfo } = useSelector(state => state.auth)
    const dispatch = useDispatch()

    useEffect(() => {
        dispatch(fetchAuth())
    }, [dispatch])

    return <>
        <header>
            <div className="icon-app">
                <NavLink to={'/'}>
                    <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 32 32">
                        <path d="M29.966,7.721l0-0.038l-0.002-0.038c-0.035-0.63-0.181-1.208-0.433-1.719L29.45,5.764L29.34,5.619 C26.47,1.801,21.229,1,17.338,1C13.614,1,9.58,1.739,6.546,2.976L6.518,2.987L6.49,3C6.123,3.163,5.008,3.66,4.178,4.819 L4.161,4.843L4.145,4.867c-0.908,1.354-0.964,2.84-1.008,4.035c-0.014,0.37-0.027,0.72-0.065,0.999L3.065,9.956L3.06,10.011 c-0.211,2.677,0.174,5.446,0.489,7.683c0.242,3.551,2.179,7.297,5.194,10.046c1.006,1.006,2.562,2.428,4.58,3.346 C14.564,31.693,15.84,32,17.117,32c4.957,0,8.675-4.502,10.92-8.279c1.983-3.415,1.964-7.396,1.948-10.595 C30.01,11.501,30.004,9.822,29.966,7.721z" opacity=".3"></path><path fill="#fff" d="M28.966,6.721l0-0.038l-0.002-0.038c-0.035-0.63-0.181-1.208-0.433-1.719L28.45,4.764L28.34,4.619 C25.47,0.801,20.229,0,16.338,0C12.614,0,8.58,0.739,5.546,1.976L5.518,1.987L5.49,2C5.123,2.163,4.008,2.66,3.178,3.819 L3.161,3.843L3.145,3.867c-0.908,1.354-0.964,2.84-1.008,4.035c-0.014,0.37-0.027,0.72-0.065,0.999L2.065,8.956L2.06,9.011 c-0.211,2.677,0.174,5.446,0.489,7.683c0.242,3.551,2.179,7.297,5.194,10.046c1.006,1.006,2.562,2.428,4.58,3.346 C13.564,30.693,14.84,31,16.117,31c4.957,0,8.675-4.502,10.92-8.279c1.983-3.415,1.964-7.396,1.948-10.595 C29.01,10.501,29.004,8.822,28.966,6.721z"></path><path d="M24.16,11.068c-0.707-0.887-1.834-2.103-3.038-1.732c-0.78,0.239-1.429,1.03-1.852,1.756 c-0.149,0.246-0.312,0.581-0.357,0.75c-0.147,0.539-0.703,0.857-1.242,0.71c-1.828-0.762,0.192-2.638,1.032-3.341 c1.21-1.111,3.339-1.444,4.473-0.079C23.393,9.224,24.943,11.453,24.16,11.068L24.16,11.068z"></path><ellipse cx="11" cy="14" rx="1" ry="2"></ellipse><ellipse cx="20" cy="14" rx="1" ry="2"></ellipse><path d="M27.221,6.645c-0.015-0.259-0.062-0.624-0.24-0.983C22.868,0.211,11.487,1.343,5.919,3.606 c-0.422,0.187-1.07,0.517-1.56,1.199C3.497,6.086,3.761,7.777,3.58,9.11c-0.195,2.471,0.158,5.088,0.5,7.5 c0.213,3.477,2.227,6.783,4.723,9.037c1.179,1.179,2.528,2.322,4.177,3.064c5.49,2.696,9.988-2.471,12.543-6.752 c1.728-2.966,1.735-6.528,1.718-9.808C27.267,10.277,27.254,8.497,27.221,6.645z M24.086,21.187 c-1.381,2.444-3.684,5.254-6.277,6.287c-0.089,0.026-0.178,0.041-0.267,0.061c0.014-0.17,0.008-0.35-0.039-0.545 c-0.003-0.011-0.744-2.872-0.747-2.883c-0.071-0.892-1.246-1.112-1.512-0.215c-0.058,0.446-0.66,2.407-0.753,3.383 c-1.574-0.607-2.989-1.844-4.093-3.138c-2.166-2.357-3.534-4.558-3.646-7.856c-0.411-3.257-0.349-6.57,0.067-9.745 c0.573-0.383,1.638-0.768,2.397-0.999c4.922-1.185,11.662-2.369,15.861,1.086c0.06,0.029,0.065,0.658,0.08,0.738 C25.255,11.923,26.248,17.135,24.086,21.187z"></path><path d="M24.359,17.409c-0.499,0.7-1.047,1.378-1.638,1.993c-0.863,0.806-2.099,2.23-3.25,1.396 c-0.723-0.447-1.514-1.021-2.116-1.599c0.153-0.058,0.307-0.112,0.452-0.187c0.172-0.089,0.254-0.296,0.184-0.482 c-0.076-0.2-0.3-0.301-0.5-0.226c-0.709,0.327-1.916,0.234-2.433-0.031c0.021-0.201,0.109-1.384,0.126-1.591l0.201-2.619 c0.047-0.852,0.178-1.6-0.042-2.441c0.017-0.885-1.193-1.88-1.771-2.412c-2.359-1.963-4.558-0.823-5.686,1.722 c-0.082,0.144,0.139,0.275,0.229,0.137c1.192-1.605,2.898-2.68,4.372-0.729c0.33,0.405,0.73,1.047,0.875,1.502 c0.021,0.079,0.083,0.236,0.078,0.242c0.196,0.36,0.226,1.212,0.252,1.986l0.106,2.57c0.01,0.25,0.061,1.419,0.064,1.643 c0.005,0.148,0.031,0.415,0.209,0.648c0.183,0.202,0.345,0.297,0.488,0.352c-0.59,0.55-1.34,1.091-2.029,1.516 c-1.149,0.836-2.392-0.589-3.253-1.395c-0.591-0.615-1.141-1.292-1.639-1.993C7.59,17.344,7.5,17.322,7.426,17.362 c-0.08,0.043-0.11,0.143-0.066,0.223c0.907,1.578,1.803,3.116,3.375,4.186c0.493,0.356,1.388,0.543,2.054,0.244 c0.195-0.079,0.729-0.338,0.923-0.43c0.713-0.367,1.378-0.75,2.056-1.272c0.146,0,0.32,0,0.466,0 c0.677,0.522,1.343,0.905,2.056,1.273c0.195,0.093,0.732,0.353,0.923,0.431c2.565,0.828,4.35-2.671,5.432-4.43 C24.748,17.409,24.471,17.24,24.359,17.409z"></path>
                    </svg>
                </NavLink>
            </div>
            <div className="user-menu">
                <UserMenu userInfo={userInfo} />
            </div>
            <div className="in-out">
                <LogInOut userInfo={userInfo} />
            </div>
        </header>
    </>
}